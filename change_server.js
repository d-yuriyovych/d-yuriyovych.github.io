(function() { 'use strict'; Lampa.Platform.tv();
var icon_server_redirect = '' 
function startMe() { if (window.location.search!='?redirect=1') { if(window.location.hostname!=Lampa.Storage.get('location_server')) { if (Lampa.Storage.get('location_server')!='-' && Lampa.Storage.get('location_server')!='') window.location.href = 'http://'+Lampa.Storage.get('location_server')+'?redirect=1'; } } else {Lampa.Storage.set('location_server','-');} Lampa.SettingsApi.addComponent({ component: 'location_redirect', name: 'Смена сервера', icon: icon_server_redirect }); Lampa.SettingsApi.addParam({ component: 'location_redirect', param: { name: 'location_server', type: 'select', values: { '-':'Текущий', 'lampa.byskaz.ru':'lampa.byskaz.ru', 'ua.byskaz.ru':'ua.byskaz.ru', 'lampa.mx':'lampa.mx' }, default: '-' }, field: { name: 'Выберите домен Lampa' }, onChange: function (value) { startMe(); } }); } if(window.appready) startMe(); else { Lampa.Listener.follow('app', function(e) { if(e.type == 'ready') { startMe(); } }); } })();
